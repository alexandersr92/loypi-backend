name: ' OTP'
description: |-

  Endpoints para env铆o y verificaci贸n de c贸digos OTP usando Twilio Verify.

  El sistema utiliza Twilio Verify para enviar y verificar c贸digos OTP v铆a SMS.
  Estos endpoints est谩n disponibles 煤nicamente para Customers (no para Owners/Users).

  **Modo Desarrollo:**
  En modo desarrollo (APP_ENV=local o APP_DEBUG=true), el sistema OTP est谩 desactivado:
  - No se env铆an SMS reales
  - El c贸digo OTP siempre es: **123456**
  - Usa este c贸digo para todas las verificaciones en desarrollo

  **Flujo de autenticaci贸n:**
  1. Env铆a un OTP con `/api/v1/otp/send`
  2. Recibe el c贸digo en tu tel茅fono v铆a SMS (o usa 123456 en desarrollo)
  3. Verifica el c贸digo con `/api/v1/otp/verify`
  4. Una vez verificado, puedes registrar o hacer login del cliente
endpoints:
  -
    custom: []
    httpMethods:
      - POST
    uri: api/v1/otp/send
    metadata:
      custom: []
      groupName: ' OTP'
      groupDescription: |-

        Endpoints para env铆o y verificaci贸n de c贸digos OTP usando Twilio Verify.

        El sistema utiliza Twilio Verify para enviar y verificar c贸digos OTP v铆a SMS.
        Estos endpoints est谩n disponibles 煤nicamente para Customers (no para Owners/Users).

        **Modo Desarrollo:**
        En modo desarrollo (APP_ENV=local o APP_DEBUG=true), el sistema OTP est谩 desactivado:
        - No se env铆an SMS reales
        - El c贸digo OTP siempre es: **123456**
        - Usa este c贸digo para todas las verificaciones en desarrollo

        **Flujo de autenticaci贸n:**
        1. Env铆a un OTP con `/api/v1/otp/send`
        2. Recibe el c贸digo en tu tel茅fono v铆a SMS (o usa 123456 en desarrollo)
        3. Verifica el c贸digo con `/api/v1/otp/verify`
        4. Una vez verificado, puedes registrar o hacer login del cliente
      subgroup: ''
      subgroupDescription: ''
      title: 'Env铆a un c贸digo OTP usando Twilio Verify (solo para customers)'
      description: |-
        Este endpoint env铆a un c贸digo OTP v铆a SMS usando Twilio Verify al n煤mero de tel茅fono proporcionado.
        El c贸digo se enviar谩 autom谩ticamente al tel茅fono del cliente.

        **Requisitos:**
        - El n煤mero de tel茅fono debe estar registrado como Customer
        - Se requiere tener las credenciales de Twilio configuradas

        **Flujo:**
        1. Llama a este endpoint para enviar el OTP
        2. Recibir谩s el c贸digo OTP en tu tel茅fono v铆a SMS (o usa 123456 en desarrollo)
        3. Usa el c贸digo recibido en el endpoint `/api/v1/otp/verify`

        **Nota:** En modo desarrollo, el c贸digo siempre es **123456** y no se env铆a SMS.
      authenticated: false
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      phone:
        custom: []
        name: phone
        description: 'El n煤mero de tel茅fono del cliente (formato internacional, ej: +521234567890).'
        required: true
        example: '+521234567890'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      phone: '+521234567890'
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "message": "C贸digo OTP enviado exitosamente.",
            "data": {
              "expires_at": "2025-01-15T10:10:00Z"
            }
          }
        headers: []
        description: ''
      -
        custom: []
        status: 404
        content: |-
          {
            "success": false,
            "message": "El n煤mero de tel茅fono no est谩 registrado como cliente."
          }
        headers: []
        description: ''
      -
        custom: []
        status: 500
        content: |-
          {
            "success": false,
            "message": "Error al enviar el c贸digo OTP. Por favor intenta nuevamente."
          }
        headers: []
        description: ''
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: api/v1/otp/verify
    metadata:
      custom: []
      groupName: ' OTP'
      groupDescription: |-

        Endpoints para env铆o y verificaci贸n de c贸digos OTP usando Twilio Verify.

        El sistema utiliza Twilio Verify para enviar y verificar c贸digos OTP v铆a SMS.
        Estos endpoints est谩n disponibles 煤nicamente para Customers (no para Owners/Users).

        **Modo Desarrollo:**
        En modo desarrollo (APP_ENV=local o APP_DEBUG=true), el sistema OTP est谩 desactivado:
        - No se env铆an SMS reales
        - El c贸digo OTP siempre es: **123456**
        - Usa este c贸digo para todas las verificaciones en desarrollo

        **Flujo de autenticaci贸n:**
        1. Env铆a un OTP con `/api/v1/otp/send`
        2. Recibe el c贸digo en tu tel茅fono v铆a SMS (o usa 123456 en desarrollo)
        3. Verifica el c贸digo con `/api/v1/otp/verify`
        4. Una vez verificado, puedes registrar o hacer login del cliente
      subgroup: ''
      subgroupDescription: ''
      title: 'Verifica un c贸digo OTP usando Twilio Verify (solo para customers)'
      description: |-
        Este endpoint verifica el c贸digo OTP recibido v铆a SMS.
        El c贸digo debe ser el que recibiste despu茅s de llamar al endpoint `/api/v1/otp/send`.

        **Importante:**
        - El c贸digo OTP expira en 10 minutos
        - Solo puedes verificar un c贸digo una vez
        - Despu茅s de verificar el OTP, puedes proceder a registrar o hacer login del cliente
      authenticated: false
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      phone:
        custom: []
        name: phone
        description: 'El n煤mero de tel茅fono del cliente (formato internacional, ej: +521234567890).'
        required: true
        example: '+521234567890'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      code:
        custom: []
        name: code
        description: 'El c贸digo OTP recibido v铆a SMS.'
        required: true
        example: '123456'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      phone: '+521234567890'
      code: '123456'
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "message": "C贸digo OTP verificado exitosamente.",
            "data": {
              "verified_at": "2025-01-15T10:05:00Z"
            }
          }
        headers: []
        description: ''
      -
        custom: []
        status: 400
        content: |-
          {
            "success": false,
            "message": "C贸digo OTP inv谩lido o expirado."
          }
        headers: []
        description: ''
      -
        custom: []
        status: 403
        content: |-
          {
            "success": false,
            "message": "Este endpoint solo est谩 disponible para clientes."
          }
        headers: []
        description: ''
      -
        custom: []
        status: 500
        content: |-
          {
            "success": false,
            "message": "Error al verificar el c贸digo OTP. Por favor intenta nuevamente."
          }
        headers: []
        description: ''
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
